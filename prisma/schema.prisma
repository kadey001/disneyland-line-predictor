generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model RideWaitTimeSnapshot {
  id           Int      @id @default(autoincrement())
  rideId       BigInt?  @map("ride_id")
  rideName     String   @map("ride_name")
  isOpen       Boolean  @map("is_open")
  waitTime     BigInt?  @map("wait_time")
  snapshotTime DateTime @map("snapshot_time")

  @@map("ride_wait_time_snapshots")
}

// DateTimes are stored in UTC
model RideDataHistory {
  id              BigInt    @id @default(autoincrement())
  externalId      String    @map("external_id")
  parkId          String    @map("park_id")
  entityType      String    @map("entity_type")
  name            String
  status          String
  lastUpdated     DateTime  @map("last_updated")
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  standbyWaitTime Int?      @map("standby_wait_time")
  returnTimeState String?   @map("return_time_state")
  returnStart     DateTime? @map("return_start")
  returnEnd       DateTime? @map("return_end")
  rideId          String    @map("ride_id")
  operatingHours  Json      @default("[]") @map("operating_hours")
  forecast        Json      @default("[]")

  @@index([parkId])
  @@index([status])
  @@index([rideId])
  @@index([externalId])
  @@index([entityType])
  @@index([lastUpdated])
  @@map("ride_data_history")
}
